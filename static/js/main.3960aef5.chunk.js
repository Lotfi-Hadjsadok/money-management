(this["webpackJsonpmy-money"]=this["webpackJsonpmy-money"]||[]).push([[0],{27:function(e,t,n){e.exports={container:"Home_container__347yP",content:"Home_content__2RvG8",sidebar:"Home_sidebar__2BOGS",transactions:"Home_transactions__2C_xp",name:"Home_name__eMOSU",amount:"Home_amount__Bl8mI"}},40:function(e,t,n){e.exports={navbar:"NavBar_navbar__1IwtZ",title:"NavBar_title__fFs0I"}},42:function(e,t,n){e.exports={"login-form":"Login_login-form__1UkJN"}},43:function(e,t,n){e.exports={"signup-form":"Signup_signup-form__1P1dF"}},48:function(e,t,n){},49:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n.n(c),r=n(41),s=n.n(r),u=(n(48),n(31)),i=n(14),o=(n(49),n(13)),l=n(17),j=n(39),b=(n(56),n(52),j.a.initializeApp({apiKey:"AIzaSyDrr-vfbqfRcaYIo2WHbk8pAXGFyy9qugs",authDomain:"mymoney-bfae1.firebaseapp.com",projectId:"mymoney-bfae1",storageBucket:"mymoney-bfae1.appspot.com",messagingSenderId:"868947494443",appId:"1:868947494443:web:a8f1b50bd3326187e58c6e",measurementId:"G-4CFMT479JE"})),d=b.firestore(),O=b.auth(),p=j.a.firestore.FieldValue.serverTimestamp(),f=n(9),m=Object(c.createContext)(),h=function(e,t){switch(t.type){case"LOGIN":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(l.a)(Object(l.a)({},e),{},{user:null});case"AUTH_IS_READY":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload,authIsReady:!0});default:return e}},x=function(e){var t=e.children,n=Object(c.useReducer)(h,{user:null,authIsReady:!1}),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(c.useEffect)((function(){var e=O.onAuthStateChanged((function(t){s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(f.jsx)(m.Provider,{value:Object(l.a)(Object(l.a)({},r),{},{dispatch:s}),children:t})},v=function(){var e=Object(c.useContext)(m);if(!e)throw new Error("UseAuthContext must be used inside AuthProvider");return e},g=n(0),y=n.n(g),_=n(1),S=n(40),N=n.n(S);var E=function(){var e=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),b=j[0],d=j[1],p=v().dispatch,f=function(){var e=Object(_.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),i(null),e.prev=2,e.next=5,O.signOut();case 5:p({type:"LOGOUT"}),n||(d(!1),i(null)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n||(console.log(e.t0.message),i(e.t0.message),d(!1));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){a(!0)}}),[]),{error:u,isPending:b,logout:f}}().logout,t=v().user;return Object(f.jsx)("nav",{className:N.a.navbar,children:Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{className:N.a.title,children:"My Money"}),!t&&Object(f.jsx)("li",{children:Object(f.jsx)(u.b,{to:"/login",children:"Login"})}),!t&&Object(f.jsx)("li",{children:Object(f.jsx)(u.b,{to:"/signup",children:"Signup"})}),t&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("li",{children:["Hello ",t.displayName]}),Object(f.jsx)("li",{children:Object(f.jsx)("button",{className:"btn",onClick:e,children:"Logout"})})]})]})})},D=n(27),w=n.n(D),I={document:null,isPending:!1,error:null,success:null},P=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:null,error:null};case"ADDED_DOC":return Object(l.a)(Object(l.a)({},e),{},{isPending:!1,document:t.payload,success:!0});case"DELETED_DOC":return Object(l.a)(Object(l.a)({},e),{},{isPending:!1,document:null,success:!0});case"ERROR":return Object(l.a)(Object(l.a)({},e),{},{isPending:!1,error:t.payload,success:!1});default:return e}},C=function(e){var t=Object(c.useReducer)(P,I),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),u=Object(o.a)(s,2),i=u[0],j=u[1],b=d.collection(e),O=function(e){i||r(e)},f=function(){var e=Object(_.a)(y.a.mark((function e(t){var n,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"IS_PENDING"}),e.prev=1,n=p,e.next=5,b.add(t);case 5:c=e.sent,O({type:"ADDED_DOC",payload:Object(l.a)(Object(l.a)({},c),{},{createdAt:n})}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),O({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(_.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"IS_PENDING"}),e.prev=1,e.next=4,b.doc(t).delete();case 4:n=e.sent,O({type:"DELETED_DOC",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),O({type:"ERROR",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){return j(!0)}}),[]),{addDocument:f,deleteDocument:m,response:a}};var R=function(e){var t=e.uid,n=Object(c.useState)(""),a=Object(o.a)(n,2),r=a[0],s=a[1],u=Object(c.useState)(""),i=Object(o.a)(u,2),l=i[0],j=i[1],b=C("transactions"),d=b.response,O=b.addDocument;return Object(c.useEffect)((function(){d.success&&(s(""),j(""))}),[d.success]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h3",{children:"Add a Transaction"}),Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O({name:r,amount:l,uid:t})},children:[Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Transaction name:"}),Object(f.jsx)("input",{type:"text",required:!0,onChange:function(e){return s(e.target.value)},value:r})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"Amount ($):"}),Object(f.jsx)("input",{type:"number",required:!0,onChange:function(e){return j(e.target.value)},value:l})]}),d.isPending&&Object(f.jsx)("button",{className:"btn",children:"Loading ..."}),!d.isPending&&Object(f.jsx)("button",{className:"btn",children:"Add Transaction"})]})]})},A=n(18);var k=function(e){var t=e.documents,n=C("transactions").deleteDocument;return Object(f.jsx)("ul",{className:w.a.transactions,children:t.map((function(e){return Object(f.jsxs)("li",{children:[Object(f.jsx)("p",{className:w.a.name,children:e.name}),Object(f.jsxs)("p",{className:w.a.amount,children:["$",e.amount]}),Object(f.jsx)("button",{onClick:function(){return n(e.id)},children:"x"})]},e.id)}))})};var L=function(){var e=v().user,t=function(e,t,n){var a=Object(c.useRef)(t).current,r=Object(c.useRef)(n).current,s=Object(c.useState)(null),u=Object(o.a)(s,2),i=u[0],j=u[1],b=Object(c.useState)(null),O=Object(o.a)(b,2),p=O[0],f=O[1];return Object(c.useEffect)((function(){var t,n,c=d.collection(e);a&&(c=(t=c).where.apply(t,Object(A.a)(a))),r&&(c=(n=c).orderBy.apply(n,Object(A.a)(r)));var s=c.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id}))})),j(t),f(null)}),(function(e){console.log(e.message),f(e.message)}));return function(){return s()}}),[e,a,r]),{documents:i,error:p}}("transactions",["uid","==",e.uid]),n=t.documents,a=t.error;return Object(f.jsxs)("div",{className:w.a.container,children:[Object(f.jsxs)("div",{className:w.a.content,children:[a&&Object(f.jsx)("p",{children:a}),n&&Object(f.jsx)(k,{documents:n})]}),Object(f.jsx)("div",{className:w.a.sidebar,children:Object(f.jsx)(R,{uid:e.uid})})]})},G=n(42),T=n.n(G);var H=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),u=s[0],i=s[1],l=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),b=j[0],d=j[1],p=v().dispatch,f=function(){var e=Object(_.a)(y.a.mark((function e(t,c){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),i(null),e.prev=2,e.next=5,O.signInWithEmailAndPassword(t,c);case 5:a=e.sent,p({type:"LOGIN",payload:a.user}),n||(d(!1),i(null)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n||(console.log(e.t0.message),i(e.t0.message),d(!1));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){a(!0)}}),[]),{error:u,isPending:b,login:f}}(),j=l.login,b=l.isPending,d=l.error;return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(n,u)},className:T.a["login-form"],children:[Object(f.jsx)("h2",{children:"Login"}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"email:"}),Object(f.jsx)("input",{type:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"password:"}),Object(f.jsx)("input",{type:"password",value:u,onChange:function(e){return i(e.target.value)}})]}),!b&&Object(f.jsx)("button",{className:"btn",children:"Login"}),b&&Object(f.jsx)("button",{className:"btn",disabled:!0,children:"Loading ..."}),d&&Object(f.jsx)("p",{children:d})]})},U=n(43),B=n.n(U);var F=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(""),j=Object(o.a)(l,2),b=j[0],d=j[1],p=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),u=s[0],i=s[1],l=v().dispatch,j=Object(c.useState)(!1),b=Object(o.a)(j,2),d=b[0],p=b[1],f=function(){var e=Object(_.a)(y.a.mark((function e(t,n,c){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),i(!0),e.prev=2,e.next=5,O.createUserWithEmailAndPassword(t,n);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,r.user.updateProfile({displayName:c});case 10:l({type:"LOGIN",payload:r.user}),d||(i(!1),a(null)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),d||(console.log(e.t0.message),a(e.t0.message),i(!1));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return p(!0)}),[]),{error:n,isPending:u,signup:f}}(),m=p.error,h=p.signup,x=p.isPending;return Object(f.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(n,u,b)},className:B.a["signup-form"],children:[Object(f.jsx)("h2",{children:"Signup"}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"email:"}),Object(f.jsx)("input",{type:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"password:"}),Object(f.jsx)("input",{type:"password",value:u,onChange:function(e){return i(e.target.value)}})]}),Object(f.jsxs)("label",{children:[Object(f.jsx)("span",{children:"display name:"}),Object(f.jsx)("input",{type:"text",value:b,onChange:function(e){return d(e.target.value)}})]}),!x&&Object(f.jsx)("button",{className:"btn",children:"Signup"}),x&&Object(f.jsx)("button",{className:"btn",children:"Loading ..."}),m&&Object(f.jsx)("p",{children:m})]})};var M=function(){var e=v(),t=e.authIsReady,n=e.user;return Object(f.jsx)("div",{className:"App",children:t&&Object(f.jsxs)(u.a,{children:[Object(f.jsx)(E,{}),Object(f.jsxs)(i.d,{children:[Object(f.jsx)(i.b,{path:"/",element:n?Object(f.jsx)(L,{}):Object(f.jsx)(i.a,{to:"/login"})}),Object(f.jsx)(i.b,{path:"/login",element:n?Object(f.jsx)(i.a,{to:"/"}):Object(f.jsx)(H,{})}),Object(f.jsx)(i.b,{path:"/signup",element:n?Object(f.jsx)(i.a,{to:"/"}):Object(f.jsx)(F,{})})]})]})})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(x,{children:Object(f.jsx)(M,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.3960aef5.chunk.js.map