(this["webpackJsonpmy-money"]=this["webpackJsonpmy-money"]||[]).push([[0],{27:function(e,t,n){e.exports={container:"Home_container__347yP",content:"Home_content__2RvG8",sidebar:"Home_sidebar__2BOGS",transactions:"Home_transactions__2C_xp",name:"Home_name__eMOSU",amount:"Home_amount__Bl8mI"}},41:function(e,t,n){e.exports={navbar:"NavBar_navbar__1IwtZ",title:"NavBar_title__fFs0I"}},43:function(e,t,n){e.exports={"login-form":"Login_login-form__1UkJN"}},44:function(e,t,n){e.exports={"signup-form":"Signup_signup-form__1P1dF"}},49:function(e,t,n){},50:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n.n(c),r=n(42),s=n.n(r),u=(n(49),n(32)),i=n(14),o=(n(50),n(13)),l=n(17),j=n(28),b=n(40),d=(n(57),n(53),b.a.initializeApp({apiKey:"AIzaSyDrr-vfbqfRcaYIo2WHbk8pAXGFyy9qugs",authDomain:"mymoney-bfae1.firebaseapp.com",projectId:"mymoney-bfae1",storageBucket:"mymoney-bfae1.appspot.com",messagingSenderId:"868947494443",appId:"1:868947494443:web:a8f1b50bd3326187e58c6e",measurementId:"G-4CFMT479JE"})),O=d.firestore(),p=d.auth(),f=b.a.firestore.FieldValue.serverTimestamp(),m=n(9),h=Object(c.createContext)(),x=function(e,t){switch(t.type){case"LOGIN":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(l.a)(Object(l.a)({},e),{},{user:null});case"AUTH_IS_READY":return Object(l.a)(Object(l.a)({},e),{},{user:t.payload,authIsReady:!0});default:return e}},v=function(e){var t=e.children,n=Object(c.useReducer)(x,{user:null,authIsReady:!1}),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(j.useEffect)((function(){var e=p.onAuthStateChanged((function(t){s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),Object(m.jsx)(h.Provider,{value:Object(l.a)(Object(l.a)({},r),{},{dispatch:s}),children:t})},g=function(){var e=Object(c.useContext)(h);if(!e)throw new Error("UseAuthContext must be used inside AuthProvider");return e},y=n(0),_=n.n(y),S=n(1),N=n(41),E=n.n(N);var D=function(){var e=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),b=j[0],d=j[1],O=g().dispatch,f=function(){var e=Object(S.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),i(null),e.prev=2,e.next=5,p.signOut();case 5:O({type:"LOGOUT"}),n||(d(!1),i(null)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n||(console.log(e.t0.message),i(e.t0.message),d(!1));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){a(!0)}}),[]),{error:u,isPending:b,logout:f}}().logout,t=g().user;return Object(m.jsx)("nav",{className:E.a.navbar,children:Object(m.jsxs)("ul",{children:[Object(m.jsx)("li",{className:E.a.title,children:"My Money"}),!t&&Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/login",children:"Login"})}),!t&&Object(m.jsx)("li",{children:Object(m.jsx)(u.b,{to:"/signup",children:"Signup"})}),t&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("li",{children:["Hello ",t.displayName]}),Object(m.jsx)("li",{children:Object(m.jsx)("button",{className:"btn",onClick:e,children:"Logout"})})]})]})})},w=n(27),I=n.n(w),P={document:null,isPending:!1,error:null,success:null},C=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,document:null,success:null,error:null};case"ADDED_DOC":return Object(l.a)(Object(l.a)({},e),{},{isPending:!1,document:t.payload,success:!0});case"DELETED_DOC":return Object(l.a)(Object(l.a)({},e),{},{isPending:!1,document:null,success:!0});case"ERROR":return Object(l.a)(Object(l.a)({},e),{},{isPending:!1,error:t.payload,success:!1});default:return e}},R=function(e){var t=Object(j.useReducer)(C,P),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),u=Object(o.a)(s,2),i=u[0],b=u[1],d=O.collection(e),p=function(e){i||r(e)},m=function(){var e=Object(S.a)(_.a.mark((function e(t){var n,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"IS_PENDING"}),e.prev=1,n=f,e.next=5,d.add(t);case 5:c=e.sent,p({type:"ADDED_DOC",payload:Object(l.a)(Object(l.a)({},c),{},{createdAt:n})}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(S.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"IS_PENDING"}),e.prev=1,e.next=4,d.doc(t).delete();case 4:n=e.sent,p({type:"DELETED_DOC",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p({type:"ERROR",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(j.useEffect)((function(){return function(){return b(!0)}}),[]),{addDocument:m,deleteDocument:h,response:a}};var A=function(e){var t=e.uid,n=Object(c.useState)(""),a=Object(o.a)(n,2),r=a[0],s=a[1],u=Object(c.useState)(""),i=Object(o.a)(u,2),l=i[0],b=i[1],d=R("transactions"),O=d.response,p=d.addDocument;return Object(j.useEffect)((function(){O.success&&(s(""),b(""))}),[O.success]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{children:"Add a Transaction"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p({name:r,amount:l,uid:t})},children:[Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"Transaction name:"}),Object(m.jsx)("input",{type:"text",required:!0,onChange:function(e){return s(e.target.value)},value:r})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"Amount ($):"}),Object(m.jsx)("input",{type:"number",required:!0,onChange:function(e){return b(e.target.value)},value:l})]}),O.isPending&&Object(m.jsx)("button",{className:"btn",children:"Loading ..."}),!O.isPending&&Object(m.jsx)("button",{className:"btn",children:"Add Transaction"})]})]})},k=n(18);var L=function(e){var t=e.documents,n=R("transactions").deleteDocument;return Object(m.jsx)("ul",{className:I.a.transactions,children:t.map((function(e){return Object(m.jsxs)("li",{children:[Object(m.jsx)("p",{className:I.a.name,children:e.name}),Object(m.jsxs)("p",{className:I.a.amount,children:["$",e.amount]}),Object(m.jsx)("button",{onClick:function(){return n(e.id)},children:"x"})]},e.id)}))})};var G=function(){var e=g().user,t=function(e,t,n){var a=Object(c.useRef)(t).current,r=Object(c.useRef)(n).current,s=Object(c.useState)(null),u=Object(o.a)(s,2),i=u[0],j=u[1],b=Object(c.useState)(null),d=Object(o.a)(b,2),p=d[0],f=d[1];return Object(c.useEffect)((function(){var t,n,c=O.collection(e);a&&(c=(t=c).where.apply(t,Object(k.a)(a))),r&&(c=(n=c).orderBy.apply(n,Object(k.a)(r)));var s=c.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id}))})),j(t),f(null)}),(function(e){console.log(e.message),f(e.message)}));return function(){return s()}}),[e,a,r]),{documents:i,error:p}}("transactions",["uid","==",e.uid]),n=t.documents,a=t.error;return Object(m.jsxs)("div",{className:I.a.container,children:[Object(m.jsxs)("div",{className:I.a.content,children:[a&&Object(m.jsx)("p",{children:a}),n&&Object(m.jsx)(L,{documents:n})]}),Object(m.jsx)("div",{className:I.a.sidebar,children:Object(m.jsx)(A,{uid:e.uid})})]})},T=n(43),H=n.n(T);var U=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),u=s[0],i=s[1],l=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(!1),j=Object(o.a)(l,2),b=j[0],d=j[1],O=g().dispatch,f=function(){var e=Object(S.a)(_.a.mark((function e(t,c){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),i(null),e.prev=2,e.next=5,p.signInWithEmailAndPassword(t,c);case 5:a=e.sent,O({type:"LOGIN",payload:a.user}),n||(d(!1),i(null)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),n||(console.log(e.t0.message),i(e.t0.message),d(!1));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return function(){a(!0)}}),[]),{error:u,isPending:b,login:f}}(),j=l.login,b=l.isPending,d=l.error;return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(n,u)},className:H.a["login-form"],children:[Object(m.jsx)("h2",{children:"Login"}),Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"email:"}),Object(m.jsx)("input",{type:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"password:"}),Object(m.jsx)("input",{type:"password",value:u,onChange:function(e){return i(e.target.value)}})]}),!b&&Object(m.jsx)("button",{className:"btn",children:"Login"}),b&&Object(m.jsx)("button",{className:"btn",disabled:!0,children:"Loading ..."}),d&&Object(m.jsx)("p",{children:d})]})},B=n(44),F=n.n(B);var M=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(o.a)(r,2),u=s[0],i=s[1],l=Object(c.useState)(""),j=Object(o.a)(l,2),b=j[0],d=j[1],O=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),s=Object(o.a)(r,2),u=s[0],i=s[1],l=g().dispatch,j=Object(c.useState)(!1),b=Object(o.a)(j,2),d=b[0],O=b[1],f=function(){var e=Object(S.a)(_.a.mark((function e(t,n,c){var r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(null),i(!0),e.prev=2,e.next=5,p.createUserWithEmailAndPassword(t,n);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not complete signup");case 8:return e.next=10,r.user.updateProfile({displayName:c});case 10:l({type:"LOGIN",payload:r.user}),d||(i(!1),a(null)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),d||(console.log(e.t0.message),a(e.t0.message),i(!1));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return O(!0)}),[]),{error:n,isPending:u,signup:f}}(),f=O.error,h=O.signup,x=O.isPending;return Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(n,u,b)},className:F.a["signup-form"],children:[Object(m.jsx)("h2",{children:"Signup"}),Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"email:"}),Object(m.jsx)("input",{type:"email",value:n,onChange:function(e){return a(e.target.value)}})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"password:"}),Object(m.jsx)("input",{type:"password",value:u,onChange:function(e){return i(e.target.value)}})]}),Object(m.jsxs)("label",{children:[Object(m.jsx)("span",{children:"display name:"}),Object(m.jsx)("input",{type:"text",value:b,onChange:function(e){return d(e.target.value)}})]}),!x&&Object(m.jsx)("button",{className:"btn",children:"Signup"}),x&&Object(m.jsx)("button",{className:"btn",children:"Loading ..."}),f&&Object(m.jsx)("p",{children:f})]})};var q=function(){var e=g(),t=e.authIsReady,n=e.user;return Object(m.jsx)("div",{className:"App",children:t&&Object(m.jsxs)(u.a,{children:[Object(m.jsx)(D,{}),Object(m.jsxs)(i.d,{children:[Object(m.jsx)(i.b,{path:"/",element:n?Object(m.jsx)(G,{}):Object(m.jsx)(i.a,{to:"/login"})}),Object(m.jsx)(i.b,{path:"/login",element:n?Object(m.jsx)(i.a,{to:"/"}):Object(m.jsx)(U,{})}),Object(m.jsx)(i.b,{path:"/signup",element:n?Object(m.jsx)(i.a,{to:"/"}):Object(m.jsx)(M,{})})]})]})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(v,{children:Object(m.jsx)(q,{})})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.1f7b9993.chunk.js.map